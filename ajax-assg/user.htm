<!DOCTYPE html>
<html>

<head>
    <title>AJAX ASSIGNMENT</title>
    <link rel="stylesheet" href="assg.css">
    <script>

        urlCurrent = window.location.href;
        console.log(urlCurrent);
        name = (urlCurrent.split('?')[1].split('=')[1]);
        name = name.split('%20').join(" ")
        console.log(name);


        var xhr = new XMLHttpRequest();
        var url = 'https://jsonplaceholder.typicode.com/users';
        xhr.response = 'json';
        xhr.onreadystatechange = () => {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                let json = JSON.parse(xhr.responseText);

                for (let key in json) {
                    if (json[key].name == name) {
                        console.log(json[key]);
                        var msg = document.createTextNode(`Hi, my name is ${json[key].name}and I live at ${json[key].address.street}. You can contact me at ${json[key].email}`);
                        // console.log(msg);
                        var para = document.createElement('p');
                        para.appendChild(msg);
                        document.getElementById('dataDiv').appendChild(para)

                    }
                }

            }
        };
        xhr.open("GET", url, true);
        xhr.send()

    </script>


</head>

<body>
    <div>
        <h4>AJAX ASSIGNMENT</h4>
        <h3>User Data</h3>
    </div>
    <hr>


    <div id="dataDiv">

    </div>
    <div id="details"></div>

</body>

</html>